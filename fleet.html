<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fleet | RouteFlow London</title>
    <link
      rel="icon"
      href="images/New_Routflow_London_Logo.png"
      type="image/png"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:wght@400;600&family=Inter:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="fleet.css" />
    <script src="theme.js" defer></script>
  </head>
  <body>
    <div id="navbar-container"></div>

    <main class="fleet-page">
      <section class="fleet-card fleet-hero">
        <div class="fleet-hero__heading">
          <p class="fleet-hero__eyebrow">Fleet database</p>
          <h1>London buses organised by registration</h1>
          <p class="fleet-hero__lead">
            Build and maintain a live catalogue of the London fleet. New
            registrations automatically generate profiles, while enthusiast
            changes stay in review until an admin approves them.
          </p>
          <p class="fleet-hero__note">
            Every vehicle profile supports fleet numbers, liveries, engineering
            details and enthusiast tags including new buses and rare workings.
          </p>
        </div>
        <dl class="fleet-stats" aria-label="Fleet summary">
          <div class="fleet-stats__item">
            <dt>Total vehicles</dt>
            <dd id="fleetTotal">0</dd>
          </div>
          <div class="fleet-stats__item">
            <dt>New buses</dt>
            <dd id="fleetNew">0</dd>
          </div>
          <div class="fleet-stats__item">
            <dt>Rare workings</dt>
            <dd id="fleetRare">0</dd>
          </div>
          <div class="fleet-stats__item">
            <dt>Pending reviews</dt>
            <dd id="fleetPending">0</dd>
          </div>
        </dl>
      </section>

      <section class="fleet-card fleet-controls" aria-labelledby="fleetFilters">
        <div class="fleet-controls__intro">
          <div>
            <h2 id="fleetFilters">Search and filter</h2>
            <p>
              Look up any registration and focus the table on new additions or
              rare workings.
            </p>
          </div>
          <button id="resetFilters" class="button-secondary" type="button">
            Reset filters
          </button>
        </div>
        <div class="fleet-controls__grid">
          <label class="fleet-controls__search" for="searchReg">
            <span>Registration</span>
            <input
              id="searchReg"
              type="search"
              placeholder="e.g. LTZ1000"
              autocomplete="off"
            />
          </label>
          <div
            class="fleet-controls__toggles"
            role="group"
            aria-label="Highlight filters"
          >
            <label class="fleet-checkbox">
              <input type="checkbox" id="filterNew" />
              <span>New buses only</span>
            </label>
            <label class="fleet-checkbox">
              <input type="checkbox" id="filterRare" />
              <span>Rare workings only</span>
            </label>
          </div>
        </div>
      </section>

      <section
        class="fleet-card fleet-highlights"
        aria-labelledby="fleetHighlightsHeading"
      >
        <header class="fleet-highlights__header">
          <div>
            <p class="fleet-hero__eyebrow">Highlights</p>
            <h2 id="fleetHighlightsHeading">
              Spotlight on new buses and rare workings
            </h2>
            <p>Recently updated profiles tagged by the community.</p>
          </div>
        </header>
        <div class="fleet-highlight-grid">
          <article class="fleet-highlight" aria-labelledby="newBusHighlight">
            <h3 id="newBusHighlight">New buses</h3>
            <ul id="newBusList" class="fleet-highlight__list"></ul>
          </article>
          <article
            class="fleet-highlight"
            aria-labelledby="rareWorkingHighlight"
          >
            <h3 id="rareWorkingHighlight">Rare workings</h3>
            <ul id="rareWorkingList" class="fleet-highlight__list"></ul>
          </article>
        </div>
      </section>

      <section
        class="fleet-card fleet-table"
        aria-labelledby="fleetTableHeading"
      >
        <div class="fleet-table__header">
          <div>
            <p class="fleet-hero__eyebrow">Fleet profiles</p>
            <h2 id="fleetTableHeading">Complete database by registration</h2>
          </div>
          <p class="fleet-table__hint">
            Submit a change request to update an existing vehicle. Admins review
            pending updates.
          </p>
        </div>
        <div class="fleet-table__scroll">
          <table>
            <thead>
              <tr>
                <th scope="col">Registration</th>
                <th scope="col">Fleet number</th>
                <th scope="col">Operator</th>
                <th scope="col">Status</th>
                <th scope="col">Vehicle type</th>
                <th scope="col">Garage</th>
                <th scope="col">Wrap</th>
                <th scope="col">Doors</th>
                <th scope="col">Engine type</th>
                <th scope="col">Engine</th>
                <th scope="col">Chassis</th>
                <th scope="col">Body type</th>
                <th scope="col">Registration date</th>
                <th scope="col">Extras</th>
                <th scope="col">Length</th>
                <th scope="col">Last updated</th>
              </tr>
            </thead>
            <tbody id="fleetTableBody"></tbody>
          </table>
        </div>
        <p id="fleetEmpty" class="fleet-table__empty" hidden>
          No vehicles match your filters yet.
        </p>
      </section>

      <section class="fleet-card fleet-form" aria-labelledby="fleetFormHeading">
        <div class="fleet-form__intro">
          <div>
            <p class="fleet-hero__eyebrow">Community updates</p>
            <h2 id="fleetFormHeading">Add a new vehicle or request a change</h2>
            <p>
              Registrations that are new to the database generate a fresh
              profile automatically. Updates to existing buses are held for
              admin approval.
            </p>
          </div>
          <p class="fleet-form__hint">
            All vehicle attributes use dropdowns so admins can curate consistent
            values.
          </p>
        </div>
        <form id="fleetForm" autocomplete="off">
          <div class="fleet-form__grid">
            <label for="busRegistration">
              <span>Registration<span aria-hidden="true">*</span></span>
              <input
                id="busRegistration"
                name="registration"
                type="text"
                required
                placeholder="Enter registration"
                autocomplete="off"
              />
            </label>
            <label for="fleetNumber">
              <span>Fleet number</span>
              <input
                id="fleetNumber"
                name="fleetNumber"
                type="text"
                placeholder="e.g. LT1"
              />
            </label>
            <label for="operatorSelect">
              <span>Operator</span>
              <select id="operatorSelect" name="operator"></select>
            </label>
            <label for="statusSelect">
              <span>Status</span>
              <select id="statusSelect" name="status"></select>
            </label>
            <label for="wrapSelect">
              <span>Wrap / livery</span>
              <select id="wrapSelect" name="wrap"></select>
            </label>
            <label for="vehicleTypeSelect">
              <span>Vehicle type</span>
              <select id="vehicleTypeSelect" name="vehicleType"></select>
            </label>
            <label for="doorsSelect">
              <span>Doors</span>
              <select id="doorsSelect" name="doors"></select>
            </label>
            <label for="engineTypeSelect">
              <span>Engine type</span>
              <select id="engineTypeSelect" name="engineType"></select>
            </label>
            <label for="engineSelect">
              <span>Engine</span>
              <select id="engineSelect" name="engine"></select>
            </label>
            <label for="chassisSelect">
              <span>Chassis</span>
              <select id="chassisSelect" name="chassis"></select>
            </label>
            <label for="bodyTypeSelect">
              <span>Body type</span>
              <select id="bodyTypeSelect" name="bodyType"></select>
            </label>
            <label for="registrationDate">
              <span>Registration date</span>
              <input
                id="registrationDate"
                name="registrationDate"
                type="date"
              />
            </label>
            <label for="garageSelect">
              <span>Garage</span>
              <select id="garageSelect" name="garage"></select>
            </label>
            <label for="extrasSelect" class="fleet-form__extras">
              <span>Extras (tags)</span>
              <select
                id="extrasSelect"
                name="extras"
                multiple
                size="6"
                aria-describedby="extrasHelp"
              ></select>
              <small id="extrasHelp"
                >Hold Ctrl (Windows) or Command (Mac) to choose multiple
                tags.</small
              >
            </label>
            <label for="lengthSelect">
              <span>Length</span>
              <select id="lengthSelect" name="length"></select>
            </label>
          </div>
          <div class="fleet-form__toggles">
            <label class="fleet-checkbox">
              <input type="checkbox" id="isNewBus" name="isNewBus" />
              <span>Mark as new bus</span>
            </label>
            <label class="fleet-checkbox">
              <input type="checkbox" id="isRareWorking" name="isRareWorking" />
              <span>Mark as rare working</span>
            </label>
          </div>
          <div class="fleet-form__actions">
            <button type="submit" class="button-primary">Submit update</button>
            <button type="button" id="clearForm" class="button-tertiary">
              Clear form
            </button>
          </div>
          <p
            id="formFeedback"
            class="fleet-form__feedback"
            role="status"
            aria-live="polite"
          ></p>
        </form>
      </section>

      <section
        class="fleet-card fleet-admin"
        aria-labelledby="adminPortalHeading"
      >
        <header class="fleet-admin__intro">
          <div>
            <p class="fleet-hero__eyebrow">Admin portal</p>
            <h2 id="adminPortalHeading">
              Approve community changes and manage dropdowns
            </h2>
            <p>
              Use the admin tools to vet pending edits and curate the lists that
              power each dropdown menu.
            </p>
          </div>
          <div class="fleet-admin__actions">
            <button
              id="adminToggle"
              class="button-primary"
              type="button"
              aria-expanded="false"
              aria-controls="adminPanel"
            >
              Access admin tools
            </button>
            <small class="fleet-admin__hint"
              >Demo access code: <code>fleet-admin</code></small
            >
          </div>
        </header>
        <div id="adminPanel" class="fleet-admin__panel" hidden>
          <div class="fleet-admin__grid">
            <section
              aria-labelledby="pendingHeading"
              class="fleet-admin__pending"
            >
              <div class="fleet-admin__section-header">
                <h3 id="pendingHeading">Pending approvals</h3>
                <span id="pendingCount" class="fleet-admin__badge"
                  >0 pending</span
                >
              </div>
              <div id="pendingContainer" class="pending-list"></div>
            </section>
            <section
              aria-labelledby="optionsHeading"
              class="fleet-admin__options"
            >
              <h3 id="optionsHeading">Manage dropdown options</h3>
              <form id="optionForm" class="option-form">
                <label for="optionCategory">Field</label>
                <select id="optionCategory" name="category">
                  <option value="operator">Operator</option>
                  <option value="status">Status</option>
                  <option value="wrap">Wrap</option>
                  <option value="vehicleType">Vehicle type</option>
                  <option value="doors">Doors</option>
                  <option value="engineType">Engine type</option>
                  <option value="engine">Engine</option>
                  <option value="chassis">Chassis</option>
                  <option value="bodyType">Body type</option>
                  <option value="garage">Garage</option>
                  <option value="extras">Extras</option>
                  <option value="length">Length</option>
                </select>
                <label for="optionValue">New option</label>
                <input
                  id="optionValue"
                  name="value"
                  type="text"
                  placeholder="Enter new option"
                />
                <button type="submit" class="button-primary">Add option</button>
              </form>
              <div>
                <h4 id="optionListHeading">Current options</h4>
                <ul
                  id="optionList"
                  class="option-list"
                  aria-labelledby="optionListHeading"
                ></ul>
              </div>
            </section>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="footer-links">
        <a href="about.html">About</a> | <a href="privacy.html">Privacy</a> |
        <a href="terms.html">Terms</a> |
        <a href="contact.html">Contact</a>
      </div>
      <div class="social-icons">
        <a href="https://discord.gg/qVf3nN4Mgq"
          ><i class="fa-brands fa-discord"></i
        ></a>
        <a href="https://www.tiktok.com/@the_bus_father"
          ><i class="fab fa-tiktok"></i
        ></a>
        <a
          href="https://www.instagram.com/thebusfatherofficial/profilecard/?igsh=NXcybzV3cTA2azBo"
          ><i class="fab fa-instagram"></i
        ></a>
      </div>
      <small>Made for London. Built from scratch.</small>
    </footer>

    <div
      id="fleetToast"
      class="fleet-toast"
      role="status"
      aria-live="polite"
    ></div>

    <script src="navbar-loader.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="main.js"></script>
    <script src="fleet.js"></script>
  </body>
</html>
