<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Profile | RouteFlow London</title>
  <link rel="icon" href="images/New_Routflow_London_Logo.png" type="image/png" />
  <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:wght@400;600&family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="profile.css" />
  <script src="theme.js" defer></script>
</head>
<body>
  <div id="navbar-container"></div>
  <main class="profile-shell" aria-live="polite">
    <section class="profile-hero card" id="profileHero">
      <div class="profile-hero__avatar">
        <img src="user-icon.png" alt="Profile avatar" id="profileAvatar" />
        <button type="button" class="profile-hero__chip" id="refreshProfile" title="Refresh profile data">Refresh</button>
      </div>
      <div class="profile-hero__content">
        <p class="profile-hero__eyebrow" id="profileRole">Guest</p>
        <h1 class="profile-hero__title" id="profileName">Your profile</h1>
        <p class="profile-hero__handle" id="profileUsername" hidden></p>
        <p class="profile-hero__subtitle" id="profileEmail">Sign in to personalise your RouteFlow London experience.</p>
        <dl class="profile-hero__meta">
          <div>
            <dt>Display name</dt>
            <dd id="profileDisplayName">—</dd>
          </div>
          <div>
            <dt>Username</dt>
            <dd id="profileHandle">—</dd>
          </div>
          <div>
            <dt>Member since</dt>
            <dd id="profileMemberSince">—</dd>
          </div>
          <div>
            <dt>Last active</dt>
            <dd id="profileLastActive">—</dd>
          </div>
          <div>
            <dt>User ID</dt>
            <dd id="profileUid">—</dd>
          </div>
          <div>
            <dt>Primary email</dt>
            <dd id="profilePrimaryEmail">—</dd>
          </div>
        </dl>
        <div class="profile-hero__actions">
          <button type="button" class="profile-hero__button" id="editProfileBtn" data-disabled>Edit profile</button>
          <a href="settings.html" class="profile-hero__button" id="openSettings" data-disabled>Open settings</a>
          <button type="button" class="profile-hero__button profile-hero__button--ghost" id="signOutBtn" data-disabled>Sign out</button>
        </div>
      </div>
    </section>

    <div
      class="profile-editor"
      id="profileEditor"
      role="dialog"
      aria-modal="true"
      aria-labelledby="profileEditorTitle"
      hidden
    >
      <div class="profile-editor__backdrop" data-profile-editor-dismiss></div>
      <form class="profile-editor__dialog" id="profileEditorForm" novalidate>
        <header class="profile-editor__header">
          <h2 id="profileEditorTitle">Edit your profile</h2>
          <p>Update how you appear across RouteFlow London.</p>
        </header>
        <div class="profile-editor__body">
          <div class="profile-editor__field">
            <label for="profileEditorDisplayName">Display name</label>
            <input
              type="text"
              id="profileEditorDisplayName"
              name="displayName"
              autocomplete="name"
              maxlength="80"
              placeholder="Your name"
            />
            <p class="profile-editor__help">Leave blank to use your email address instead.</p>
          </div>
          <div class="profile-editor__field">
            <label for="profileEditorGender">Gender</label>
            <input
              type="text"
              id="profileEditorGender"
              name="gender"
              maxlength="60"
              placeholder="E.g. Woman, Man, Non-binary"
            />
            <p class="profile-editor__help">Optional. Saved securely via our Neon-backed profile service.</p>
          </div>
          <div class="profile-editor__field">
            <label for="profileEditorAvatar">Avatar</label>
            <input type="file" id="profileEditorAvatar" name="avatar" accept="image/*" />
            <p class="profile-editor__help">Images up to 5&nbsp;MB. We'll resize them to fit the profile hero.</p>
          </div>
          <p class="profile-editor__error" id="profileEditorError" role="status" aria-live="polite"></p>
        </div>
        <footer class="profile-editor__actions">
          <button type="submit" class="profile-hero__button" id="profileEditorSave">Save changes</button>
          <button
            type="button"
            class="profile-hero__button profile-hero__button--ghost"
            id="profileEditorCancel"
            data-profile-editor-dismiss
          >
            Cancel
          </button>
        </footer>
      </form>
    </div>

    <section class="profile-grid">
      <article class="profile-card profile-card--stats" id="profileStatsCard">
        <header class="profile-card__header">
          <h2>Account snapshot</h2>
          <p class="profile-card__subtitle" id="profileStatusMessage">Keep an eye on your saved stops and personalised notes.</p>
        </header>
        <ul class="profile-stats" id="profileStats">
          <li>
            <span>Favourites</span>
            <strong id="statFavourites">0</strong>
          </li>
          <li>
            <span>Saved notes</span>
            <strong id="statNotes">0</strong>
          </li>
          <li>
            <span>Recent lookups</span>
            <strong id="statRecents">0</strong>
          </li>
        </ul>
      </article>

      <article class="profile-card" id="profileFavouritesCard">
        <header class="profile-card__header">
          <h2>Saved favourites</h2>
          <p class="profile-card__subtitle">Quick access to the stops and routes you rely on the most.</p>
        </header>
        <ul class="profile-list" id="profileFavouritesList" aria-live="polite"></ul>
      </article>

      <article class="profile-card" id="profileRecentsCard">
        <header class="profile-card__header">
          <h2>Recent lookups</h2>
          <p class="profile-card__subtitle">Jump back to journeys and stops you've viewed recently.</p>
        </header>
        <ul class="profile-list" id="profileRecentsList" aria-live="polite"></ul>
      </article>

      <article class="profile-card" id="profileNotesCard">
        <header class="profile-card__header">
          <h2>Personal notes</h2>
          <div class="profile-card__actions">
            <button type="button" class="profile-chip" id="addNoteBtn">Add note</button>
          </div>
          <p class="profile-card__subtitle">Keep track of service changes, planned trips, or anything else you need to remember.</p>
        </header>
        <ul class="profile-list profile-list--notes" id="profileNotesList" aria-live="polite"></ul>
      </article>

      <article class="profile-card" id="profilePreferencesCard">
        <header class="profile-card__header">
          <h2>Accessibility &amp; theme</h2>
          <p class="profile-card__subtitle">Your current appearance and accessibility preferences.</p>
        </header>
        <dl class="profile-preferences" id="profilePreferences"></dl>
      </article>
    </section>
  </main>

  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDuedLuagA4IXc9ZMG9wvoak-sRrhtFZfo",
      authDomain: "routeflow-london.firebaseapp.com",
      projectId: "routeflow-london",
      storageBucket: "routeflow-london.firebasestorage.app",
      messagingSenderId: "368346241440",
      appId: "1:368346241440:web:7cc87d551420459251ecc5"
    };
    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }
  </script>
  <script src="navbar-loader.js" defer></script>
  <script type="module" src="profile.js"></script>
</body>
</html>
