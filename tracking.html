<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Live Tracking | RouteFlow London</title>
  <link rel="icon" href="images/New_Routflow_London_Logo.png" type="image/png" />
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha512-WBko8Y1YId2h7Gc6Y9ko3nQ9srlH0TfzUKGwEuITTwSb9VjA36TObgGJE0E7E5Wn0T4kLhM651Emp01+/7B9A==" crossorigin="" />
  <link rel="stylesheet" href="style.css" />
  <script src="theme.js" defer></script>
  <script src="site.js" defer></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha512-kZPmIOr8lf0WgZFODdgNpTiFqouBZfyqCkCmZJLdnOjFkWDXLI4YAl4XrhIRbkIuWZIWx0zK0d2R3K0wYfJdPw==" crossorigin="" defer></script>
  <script src="tracking.js" defer></script>
  <script src="navbar-loader.js" defer></script>
</head>
<body class="metro-app metro-app--live">
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <header class="metro-app__header" aria-label="RouteFlow London navigation">
    <div id="navbar-container" class="metro-app__navbar"></div>
  </header>

  <main id="main-content" class="metro-app__main" aria-labelledby="liveTitle">
    <section class="live-hero" aria-labelledby="liveTitle">
      <div class="live-hero__badge">Live TfL feed</div>
      <h1 id="liveTitle">Navigate London like a controller.</h1>
      <p>Zoom into glowing vehicles, slide open dossiers, and pin rare workings without refreshing the page. RouteFlow Live syncs straight to TfL, so the network flows like an interactive game board.</p>
      <div class="live-hero__meta">
        <span><i class="fa-solid fa-bus"></i> Buses, Tube, DLR, River</span>
        <span><i class="fa-solid fa-rotate"></i> Refreshes every 25s</span>
        <span><i class="fa-solid fa-medal"></i> XP on every watch</span>
      </div>
    </section>

    <section class="live-console" aria-label="Live tracking console">
      <div class="live-console__map" id="liveMap" role="presentation"></div>
      <aside class="live-console__panel">
        <article class="live-panel" data-reveal>
          <header class="live-panel__header">
            <div>
              <h2>Locate a stop</h2>
              <p>Search routes, garages, or registrations to centre the map and list departures.</p>
            </div>
            <span class="live-panel__status" id="trackingTimestamp">Updated just now</span>
          </header>
          <div class="live-panel__search" role="search">
            <label class="sr-only" for="trackingSearch">Search stops</label>
            <div class="tracking-search__field">
              <input id="trackingSearch" type="search" placeholder="Marble Arch, Route 25, LTZ1234" aria-describedby="trackingSearchHint" />
              <button type="button" data-xp-action="0.03">
                <i class="fa-solid fa-magnifying-glass" aria-hidden="true"></i>
                <span>Search</span>
              </button>
              <div class="tracking-search__results" id="trackingResultsList"></div>
            </div>
            <p id="trackingSearchHint" class="live-panel__hint">Use stop names or route numbers. Results appear instantly.</p>
          </div>
          <div class="live-panel__filters">
            <button class="live-filter" type="button" data-mode-filter="bus" data-xp-action="0.02">Bus</button>
            <button class="live-filter" type="button" data-mode-filter="tube" data-xp-action="0.02">Tube</button>
            <button class="live-filter" type="button" data-mode-filter="night" data-xp-action="0.02">Night</button>
            <button class="live-filter" type="button" data-mode-filter="all" data-xp-action="0.02">All modes</button>
          </div>
          <div class="live-panel__board" id="trackingRows">
            <div class="empty" aria-live="polite">Enter a stop to load departures.</div>
          </div>
        </article>
        <article class="live-panel live-panel--glass" data-reveal>
          <h3>Network intel</h3>
          <ul class="live-intel" role="list">
            <li><i class="fa-solid fa-route" aria-hidden="true"></i> Click a marker to see its direction, operator, and upcoming stops.</li>
            <li><i class="fa-solid fa-thumbtack" aria-hidden="true"></i> Pin rare sightings to your dashboard — XP guaranteed.</li>
            <li><i class="fa-solid fa-map-location-dot" aria-hidden="true"></i> Overlay garage catchment areas from the Fleets page for deeper dives.</li>
          </ul>
          <a class="live-panel__link" href="fleet.html" data-xp-action>Open Fleets database</a>
        </article>
      </aside>
    </section>
  </main>

  <footer class="metro-footer" aria-label="RouteFlow London footer">
    <div class="metro-footer__inner">
      <div class="metro-footer__brand">
        <span class="metro-footer__roundel" aria-hidden="true">
          <img src="images/New_Routflow_London_Logo.png" alt="" />
        </span>
        <div>
          <p>© RouteFlow London <span data-current-year>2025</span></p>
          <p>Clean. Dynamic. London.</p>
        </div>
      </div>
      <div class="metro-footer__status">
        <span class="metro-footer__status-indicator" aria-hidden="true"></span>
        <span>Connected to TfL API <strong>✅</strong></span>
      </div>
      <nav class="metro-footer__links" aria-label="Social links">
        <a href="https://discord.com" target="_blank" rel="noreferrer">Discord</a>
        <a href="https://github.com" target="_blank" rel="noreferrer">GitHub</a>
        <a href="https://instagram.com" target="_blank" rel="noreferrer">Instagram</a>
        <a href="https://x.com" target="_blank" rel="noreferrer">X</a>
      </nav>
    </div>
  </footer>
</body>
</html>
